<!DOCTYPE html>
<!--[if lte IE 9]><html class="no-js is-ie"><![endif]-->
<!--[if gt IE 8]><!--><html class=no-js><!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">


	<title>HPV</title>
	<link rel=stylesheet href="css/main.css">
	<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,700,300,600,800,400' rel='stylesheet' type='text/css'>
	
	<link rel=stylesheet href="css/ie.css">
	
    <script src="js/vendor/modernizr.js"></script>
		<script src="js/vendor/respond.min.js"></script>

   <base target="_blank">
    
</head>

<body>
	
		<div class="container full-height">
			<div class=v-align-parent>
				<div class=v-center>
					<div class="row">
						<div class="col-md-5">	
                         <span style="font-family: Lato, sans-serif">
                            <h1 class="mb-10 heading">Will Vaccines</h1>
                            <h1 class="mb-10 heading">Help Reduce Your</h1>
                            <h1 class="mb-10 heading">Risk of Getting</h1>
                             <h1 class="mb-10 heading">HPV Infections?</h1>
                           <br>
                            <div class="subheading mb-20">
                                
                                    <p><b>What is HPV?</b>
                                    <br>
                                    Human papillomaviruses (HPVs) are a group of more than 100 types of viruses that are the most common sexually transmitted infections in the United States. Nearly 80 million Americans—about one in four—are currently infected with HPVs. It is estimated that around 14 million people, including teenagers, will become newly infected each year. 
                                    <br><br>
                                    Some types of HPVs can cause serious health problems including certain kinds of cancers (e.g., cervical cancer, anal cancer, and oropharyngeal cancers). Research has identified that almost 100% of cervical cases are caused by HPVs. About 26.8% of women in the US are infected with HPVs; of those, most have certain types of HPVs that cause cervical cancer.
                                    </p>
                                    <br>
                                    <p><b>Who gets HPV infections?</b>
                                    <br>
                                    Anyone who has ever been sexually active (that is, engaged in skin-to-skin sexual conduct, including vaginal, anal, or oral sex) can get HPVs. HPV infection is most common in people in their late teens and early 20s. The risk of getting infected with HPVs for age group of 20-24 is about 44.8%, while the risks for other age groups are under 30%.
                                    <br><br>
                                    HPV is easily passed between partners through sexual contact. HPV infections are more likely in those who have had many sex partners or have had sex with someone who has had many partners. The risk of getting HPVs for people who have not had any sexual partner is 5.2%; for people who have had one sexual partner is 11.5%; for people who have had two sexual partners is 24.3%; for people who have 3-5 sexual partners is 32.0%; and for people who have 6 and more sexual partners is 35.3%.
                                    </p>
                                    <br>
                                    <p>
                                    <b>How can I prevent HPV inflections?</b><br>
                                    HPV vaccines are highly effective in preventing the targeted HPV types. Three vaccines (Cervarix, Gardasil, and Gardasil 9) have been approved by the Food and Drug Administration (FDA) to prevent HPV infection, and results of clinical trials have demonstrated high efficacy (about 95%) of these vaccines. All three HPV vaccines are licensed for females and males through age 26.
                                    </p>    
                                
                              </div>  
						</div>
						
						<div class="col-md-7">
                           <center>
                            <h2 class="mb-10 heading">What is Your Estimated Risk of Having HPV?</h2>
                            <br>
                               <h3 class="mb-10 heading"><b>Click</b> the following buttons to explore how your risk of getting infected with HPV <br> is influenced by the <b>number of your sexual partners in lifetime.</b></h3>
                                <br>
                               <center>
<!--						        <div class="btn-group" data-toggle="buttons-radio">-->
                                    <button type="button" id="zero" class="btn switch" >0</button>
                                    <button type="button" id="one" class="btn switch">1</button>
                                    <button type="button" id="two" class="btn switch">2</button>
                                    <button type="button" id="three_five" class="btn switch">3-5</button>
                                    <button type="button" id="six_plus" class="btn switch">6+</button>
<!--                                </div>-->
                               </center>
    <br><br>
							<div id="hpvchart"></div>
                              <h5 class="mb-10 heading">
                              <span style="color:#8cb8ba">Vaccinated</span>
                              <span style="color:white">. . . . . . . . . .</span>   
                               <span style="color:#aa5135">Not Vaccinated</span></h5> 
                               <br>
                                <br>
                                <p>
                                    <h2 class="mb-10 heading">How can I get HPV vaccinated?</h2>
                             <br>
                               <h3 class="mb-10 heading">
                                   Health insurance plans cover the cost of HPV vaccines.<br> If you don't have insurance, the Vaccines for Children (VFC) program<br> may be able to help. To check where you can get HPV vaccinated, please go<br> to the following website and enter your zip code:<br> <a href="http://www.vaccines.gov/getting/where/index.html">http://www.vaccines.gov/getting/where/index.html</a></h3>
                                    </p>
                            <br>
                            <center>
                                <iframe frameborder="0" height="152" id="vaccinefinder" marginheight="0" marginwidth="0" name="vaccinefinder" scrolling="no" src="//wcdapps.hhs.gov/Badges/Handlers/Badge.ashx?js=0&widgetname=vaccinefinder" title="Vaccine.gov" width="269"></iframe></center><br><br>
                              </div>
							</div>
						</div>
					</div>
				</div>
			</div>

	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.1.min.js"><\/script>')</script>

	<script src="js/bootstrap.min.js"></script>
	<script src="js/dropdown.js"></script> 
	<script src="js/main.js"></script>
	<!-- //-end- concat_js -->
	
	<!-- D3 SCRIPTS -->
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>


	<script>
        // Size of SVG container
            var fullwidth = 600;
			var	fullheight = 600;
        
        // Margins around the graph
            var margin = {top: 65, right: 90, bottom: 40, left: 66};
            
            var width = fullwidth - margin.left - margin.right;
            var height = 265 - margin.top - margin.bottom;
        
            var widthScale = d3.scale.linear()
				.range([0, width]);
        
        // Space out the bars between the top margin and chart height (bottom)
			var heightScale = d3.scale.ordinal()
				.rangeRoundBands([ 0, height], 0.5);   
        
            var xAxis = d3.svg.axis()
							.scale(widthScale)
							.orient("bottom")
                            .innerTickSize([4])
                            .outerTickSize([5]);
            
            var yAxis = d3.svg.axis()
							.scale(heightScale)
							.orient("left")
							.innerTickSize([0]);
        
            var svg = d3.select("#hpvchart")
				.append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
				.append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
            var numOfPartner = 'zero';
            var status = 0;
        
            d3.csv("data/hpv-data.csv", function(error, data) {

				if (error) {
					console.log("error reading file");
				}

				data.sort(function(a, b) {
					return d3.descending(+a.status, +b.status);
				});
            
				// you should calculate using d3.max for your data
				widthScale.domain([ 0, d3.max(data, function(d) {
					return +d.start;
				}) ]);

				heightScale.domain(data.map(function(d) { return +d.average; } ).slice(1));
            
            var rects = svg.selectAll("rect")
                    .data(([data[0]]))
                    .enter()
                    .append("rect");
            
                rects
					.attr("x", 0)
					.attr("y", function(d) {
						return heightScale(d.status); // because we mapped to the names!
					})
					.attr("width", function(d) {
						return widthScale(+d.average);
					})
					.attr("height", heightScale.rangeBand()); // the height is a rangeband
            
                 svg.selectAll("#red-text")
                   .attr("class", "label")
				    .data(([data[0]]))
			      	.enter()
			      	.append("text")
				    .text(function(d){
                        return  +d.average + " %";
					 })         
                     .attr("x", function(d) {
						return widthScale(+d.average)+5;
					})
                     .attr('y', '-45')
                     .attr('id', 'red-text')
                     .attr("fill","#8a8c8e")
                     .attr("font-size","24")
                     .attr("font-weight","700")
                 
                 svg.selectAll("#blue-text")
                   .attr("class", "label")
				    .data(([data[1]]))
			      	.enter()
			      	.append("text")
				    .text(function(d){
                        return  +d.average + " %";
					 })         
                     .attr("x", function(d) {
						return widthScale(+d.average)-55;
					})
                     .attr('y', '-45')
                     .attr('id', 'blue-text')
                     .attr("fill","#8a8c8e")
                     .attr("font-size","24")
                     .attr("font-weight","700")
                 
                               /*gradient
                               var gradient = svg.append("g")
  .append("linearGradient")
    .attr("id", "gradient")
    .attr("x1", "0%")
    .attr("y1", "0%")
    .attr("x2", "100%")
    .attr("y2", "100%")
    .attr("spreadMethod", "pad");

gradient.append("stop")
    .attr("offset", "0%")
    .attr("stop-color", "#0c0")
    .attr("stop-opacity", 1);

gradient.append("stop")
    .attr("offset", "100%")
    .attr("stop-color", "#c00")
    .attr("stop-opacity", 1);*/
                 
                    // Style the axis
                svg.append("g")
                    .attr("class", "x axis")
                    .attr("transform", "translate(0," + height + ")")
                    .call(xAxis)
                    ;
            
            // Label below x axis
				svg.append("text")
					.attr("class", "xlabel")
        			.attr("transform", "translate(" + width/2 + " ," +
        				height + ")")
        			.style("text-anchor", "middle")
        			.attr("dy", "0")
        			.text("  ")
                    .attr("fill","#5582b0")
                    .attr("font-weight","600")
                ;
                
 
                svg.selectAll(".red-img")
                    .data(([data[0]]))  
                    .enter()
                    .append("svg:image")
                    .attr("x", function(d) {
						return widthScale(+d.average)-45;
					})
                    .attr('y', '-40')
                    .attr('class', 'red-img')
                    .attr("height", 200)
                    .attr("width", 115)
                        .attr("xlink:href", "https://cibonaydames.github.io/hpv/img/silueta-red.svg");
                
                 svg.selectAll(".blue-img")
                    .data(([data[1]]))  
                    .enter()
                    .append("svg:image")
                    .attr("x", function(d) {
						return widthScale(+d.average)-45;
					})
                    .attr('y', '-40')
                    .attr('class', 'blue-img')
                    .attr("height", 200)
                    .attr("width", 115)
                        .attr("xlink:href", "https://cibonaydames.github.io/hpv/img/silueta-blue.svg");
                
            
            /*d3.selectAll("button")
                    .on("click",function(){
                        console.log(this.id);
                    });*/
            
             d3.selectAll("button").on("click",function(){
	               if(this.id == "unvaccinated")
                      status = 0;
	               else if(this.id == "vaccinated") {
                      status = 1;
	                   }
	               else {
		              numOfPartner = this.id;
	                   }   
                 
                 rects
	               .data(data)
                   .transition() 
                   .duration(1000)
                   .ease("linear")
	               .attr("width", function(d) {
			         return widthScale(data[status][numOfPartner]); 
           });
                     
               svg.selectAll("#red-text")
               .data([data[0]])
               .transition() 
                   .duration(1000)
                   .ease("linear")
	               .attr("x", function(d) {
			         return widthScale(d[numOfPartner])})
                     .text(function(d){
                       return d[numOfPartner] + " %"
					 }); 
                 
                svg.selectAll("#blue-text")
               .data([data[1]])
               .transition() 
                   .duration(1000)
                   .ease("linear")
	               .attr("x", function(d) {
			         return widthScale(d[numOfPartner])-65;})
                     .text(function(d){
                       return d[numOfPartner] + " %"
					 }); 
               
                svg.selectAll(".red-img")
                    .data([data[0]])
                    .transition() 
                   .duration(1000)
                   .ease("linear")
	               .attr("x", function(d) {
			    //get correct number     
                return widthScale(d[numOfPartner])-45;  });
                
           
                 svg.selectAll(".blue-img")
                    .data([data[1]])
                    .transition() 
                   .duration(1000)
                   .ease("linear")
	               .attr("x", function(d) {
			    //get correct number     
                return widthScale(d[numOfPartner])-45;  });
                 
                 function wrap(text, width) {
  text.each(function() {
    var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        word,
        line = [],
        lineNumber = 0,
        lineHeight = 1.1, // ems
        y = text.attr("y"),
        dy = parseFloat(text.attr("dy")),
        tspan = text.text(null).append("tspan").attr("x", 0).attr("y", y).attr("dy", dy + "em");
    while (word = words.pop()) {
      line.push(word);
      tspan.text(line.join(" "));
      if (tspan.node().getComputedTextLength() > width) {
        line.pop();
        tspan.text(line.join(" "));
        line = [word];
        tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word);
      }
    }
      });
}
		         
	       });

           });  
         

    </script>

</body>
</html>


